# Project Context

## Purpose
DataAnalysis 是一個互動式資料分析與機器學習訓練平台，提供以下核心功能：

1. **資料分析頁面** - 使用者可以上傳或輸入資料，系統會自動顯示資料分布視覺化圖表，幫助使用者快速了解資料特徵
2. **訓練頁面** - 提供多種訓練方式選擇（線性回歸、線性回歸梯度下降等），使用者可以：
   - 選擇訓練演算法
   - 設定損失函式
   - 執行訓練並查看訓練結果（損失曲線、模型參數等）
3. **預測頁面** - 使用訓練好的模型進行預測：
   - 支援單筆資料輸入
   - 支援上傳與訓練資料相同格式的 CSV 檔案進行批次預測

專案目標是提供一個完整的資料分析到模型訓練再到預測的端到端工作流程。

## Tech Stack
- **Python** - 主要後端程式語言
- **Streamlit** - Web UI 框架（選擇原因：易於開發、部署簡單、適合非程式人員使用、可打包成獨立應用）
- **Pandas** - 資料處理與分析
- **NumPy** - 數值計算
- **Scikit-learn** - 機器學習演算法（線性回歸等）
- **Plotly** - 互動式資料視覺化與分布圖表（與 Streamlit 整合良好）
- **PyInstaller** - 應用程式打包工具（可將 Streamlit 應用打包成獨立可執行檔）
- **CSV** - 主要資料輸入格式

## Project Conventions

### Code Style
- 遵循 PEP 8 Python 程式碼風格指南
- 使用 4 個空格縮排（不使用 Tab）
- 函數和變數命名使用 snake_case
- 類別命名使用 PascalCase
- 常數使用 UPPER_SNAKE_CASE
- 函數和類別應包含 docstring（使用 Google 或 NumPy 風格）

### Architecture Patterns
- **Streamlit 多頁面架構** - 使用 Streamlit 的 `st.pages` 或 `st.sidebar` 導航，分為三個主要頁面：資料分析頁、訓練頁、預測頁
- **模組化設計** - 將資料處理、模型訓練、預測功能分離到不同模組，便於維護和測試
- **模型管理** - 訓練好的模型應可保存和載入，供預測頁面使用（使用 Pickle/Joblib）
- **資料分離** - 原始資料存放在 `data/` 目錄，處理後的資料應明確標示
- **狀態管理** - 使用 Streamlit 的 Session State 管理訓練頁的模型狀態，使其可在預測頁使用
- **函數式優先** - 優先使用純函數，減少副作用
- **使用者友善設計** - 介面設計考慮非程式人員使用，提供清晰的說明文字和錯誤提示

### Testing Strategy
- **手動測試與驗證** - 所有測試和驗證工作由專案維護者手動執行，AI 助手不應自動執行測試命令或驗證流程
- **測試責任** - 開發完成後，測試和驗證由專案維護者負責執行
- **測試清單** - 變更提案中的 `tasks.md` 會包含測試項目，但這些項目僅作為檢查清單，不應自動執行

## Domain Context
- **資料輸入** - 支援 CSV 格式資料檔案上傳，以及單筆資料輸入
- **資料類型** - 資料可能包含數值、百分比、布林值等多種資料類型
- **資料分析** - 自動計算並視覺化資料分布（直方圖、散點圖、統計摘要等）
- **訓練演算法** - 目前支援：
  - 線性回歸（Linear Regression）
  - 線性回歸梯度下降（Linear Regression with Gradient Descent）
- **損失函式** - 支援多種損失函式選擇（如 MSE、MAE、Huber Loss 等）
- **訓練結果** - 顯示訓練過程中的損失變化、最終模型參數、評估指標等
- **預測功能** - 使用訓練好的模型對新資料進行預測，支援單筆和批次預測
- **錯誤處理** - 所有功能應具備良好的錯誤處理和資料驗證機制
- **使用者體驗** - 介面應清晰易用，結果展示應直觀易懂

## Important Constraints
- **非程式人員友善** - 介面設計必須直觀易用，避免技術術語，提供清晰的操作指引
- **部署便利性** - 應用應可打包成獨立可執行檔（使用 PyInstaller），無需使用者安裝 Python 環境
- **資料編碼** - 資料檔案可能包含編碼問題（如 UTF-8/BIG5），需要適當處理
- **資料格式一致性** - 預測頁面的輸入資料格式必須與訓練資料格式一致
- **模型持久化** - 訓練好的模型應可保存，避免每次都需要重新訓練
- **效能考量** - 大型資料集需要考慮記憶體使用效率和訓練時間，使用 Streamlit 的快取機制優化
- **可重複性** - 確保資料處理和模型訓練的可重複性和可追溯性
- **使用者輸入驗證** - 所有使用者輸入（資料、參數設定）都需要進行驗證，提供即時回饋
- **錯誤回饋** - 當訓練失敗或預測出錯時，應提供清晰、易懂的錯誤訊息，避免技術性錯誤代碼
- **跨平台支援** - 打包的應用應支援 Windows、macOS、Linux（如需要）

## External Dependencies
- **Web 框架** - Streamlit（主要 UI 框架）
- **Python 資料科學套件** - Pandas, NumPy, Scikit-learn
- **視覺化套件** - Plotly（與 Streamlit 整合良好，提供互動式圖表）
- **模型序列化** - Pickle 或 Joblib 用於模型保存與載入
- **打包工具** - PyInstaller（將 Streamlit 應用打包成獨立可執行檔）
- **資料來源** - `data/data.csv` 及其他使用者上傳的資料檔案

## Deployment Options
- **獨立可執行檔** - 使用 PyInstaller 打包成 `.exe`（Windows）或 `.app`（macOS），使用者無需安裝 Python
- **Streamlit Cloud** - 可部署到 Streamlit Cloud 提供線上服務
- **Docker 容器** - 可打包成 Docker 映像檔，方便在不同環境部署
- **本地執行** - 開發模式下可直接執行 `streamlit run app.py`
