## Context
當訓練資料量較少時，模型容易過擬合且泛化能力不足。資料擴增是一種常見的技術，可以透過對現有資料進行變換來增加訓練樣本數量，提升模型的泛化能力。

## Goals / Non-Goals
- **Goals**:
  - 提供簡單易用的資料擴增功能，適合非程式人員使用
  - 支援對數值型欄位添加噪聲進行擴增
  - 僅對訓練集擴增，保持測試集原樣以確保評估準確性
  - 提供清晰的參數設定和擴增效果反饋

- **Non-Goals**:
  - 不支援類別型欄位的擴增（未來可擴展）
  - 不支援其他擴增方法（如 SMOTE、旋轉、翻轉等，未來可擴展）
  - 不支援自動選擇擴增參數（需要使用者手動設定）

## Decisions
- **Decision**: 使用噪聲擴增作為初始實作方法
  - **Rationale**: 噪聲擴增簡單直觀，適合數值型資料，參數易於理解和調整
  - **Alternatives considered**: 
    - SMOTE：需要更複雜的實作，且主要適用於分類問題
    - 資料變換（旋轉、翻轉）：主要適用於圖像資料
    - 合成資料生成：需要更複雜的模型，超出當前範圍

- **Decision**: 僅對訓練集進行擴增
  - **Rationale**: 測試集應保持原樣以確保模型評估的準確性和可重複性
  - **Alternatives considered**: 
    - 同時擴增訓練集和測試集：會導致評估結果不準確
    - 僅擴增測試集：不符合資料擴增的常見做法

- **Decision**: 僅對數值型欄位進行擴增
  - **Rationale**: 類別型欄位的擴增需要更複雜的策略，且可能改變資料的語義
  - **Alternatives considered**: 
    - 同時擴增數值和類別欄位：需要定義類別欄位的擴增策略，增加複雜度
    - 使用 SMOTE 處理類別欄位：超出當前範圍

- **Decision**: 提供高斯噪聲和均勻噪聲兩種選項
  - **Rationale**: 兩種噪聲類型各有特點，讓使用者可以根據資料特性選擇
  - **Alternatives considered**: 
    - 僅提供高斯噪聲：限制使用者的選擇
    - 提供更多噪聲類型：增加複雜度，不符合簡單優先原則

- **Decision**: 噪聲強度使用相對值（相對於資料標準差的比例）
  - **Rationale**: 相對值更直觀，可以適應不同尺度的資料
  - **Alternatives considered**: 
    - 使用絕對值：需要使用者了解資料的尺度，不夠直觀
    - 自動計算：需要更複雜的邏輯，不符合簡單優先原則

## Implementation Details
- **噪聲計算方式**:
  - 高斯噪聲：`noise = np.random.normal(0, std * noise_strength, size)`
  - 均勻噪聲：`noise = np.random.uniform(-std * noise_strength, std * noise_strength, size)`
  - 其中 `std` 是該欄位的標準差，`noise_strength` 是使用者設定的噪聲強度

- **擴增流程**:
  1. 識別數值型欄位
  2. 對每個數值欄位計算標準差
  3. 根據噪聲類型和強度生成噪聲
  4. 將噪聲添加到原始資料
  5. 重複擴增倍數次，生成多個擴增樣本
  6. 合併原始資料和擴增資料

- **資料統計顯示**:
  - 擴增前：樣本數、各欄位平均值、標準差
  - 擴增後：樣本數、各欄位平均值、標準差
  - 使用表格或對比圖表展示

## Risks / Trade-offs
- **Risk**: 噪聲強度設定不當可能導致資料失真
  - **Mitigation**: 提供合理的預設值（0.1）和範圍限制（0.01-0.5），並顯示擴增效果讓使用者確認

- **Risk**: 擴增倍數過大可能導致記憶體問題
  - **Mitigation**: 限制擴增倍數上限（5倍），並在擴增後顯示資料大小

- **Risk**: 擴增可能改變資料分布，影響模型訓練
  - **Mitigation**: 顯示擴增前後的統計資訊，讓使用者了解擴增效果，並提供關閉擴增的選項

- **Trade-off**: 簡單性 vs 功能完整性
  - **Choice**: 優先選擇簡單實作，僅支援數值欄位噪聲擴增，未來可擴展

## Open Questions
- 是否需要提供自動選擇噪聲強度的選項？
- 是否需要支援對目標變數（y）的擴增，還是僅擴增特徵變數（X）？
- 擴增後的資料是否需要保存到檔案？

