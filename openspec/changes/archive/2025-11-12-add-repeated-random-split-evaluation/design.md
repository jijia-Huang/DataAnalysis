## Context
單次隨機分割評估可能受到隨機性的影響，導致評估結果不穩定。重複隨機分割評估（Repeated Random Splits）是一種簡單有效的交叉驗證方法，可以透過多次隨機分割來獲得更穩定、可靠的評估結果。

## Goals / Non-Goals
- **Goals**:
  - 提供重複隨機分割評估功能，讓使用者可以獲得更穩定的評估結果
  - 顯示評估指標的平均值和標準差，讓使用者了解評估結果的變異性
  - 保持原有的單次評估功能作為預設選項
  - 提供清晰的結果展示，易於理解

- **Non-Goals**:
  - 不實作 K-fold 交叉驗證（未來可擴展）
  - 不實作 Leave-One-Out 交叉驗證（未來可擴展）
  - 不實作 Stratified 分割（未來可擴展）

## Decisions
- **Decision**: 使用重複隨機分割作為評估方法
  - **Rationale**: 簡單直觀，易於理解和實作，適合非程式人員使用
  - **Alternatives considered**: 
    - K-fold 交叉驗證：需要更複雜的實作，且需要設定 K 值
    - Leave-One-Out：計算成本高，不適合大型資料集
    - Stratified 分割：主要適用於分類問題

- **Decision**: 保持單次評估作為預設選項
  - **Rationale**: 單次評估速度快，適合快速測試和開發
  - **Alternatives considered**: 
    - 預設使用重複隨機分割：會增加訓練時間，不適合快速測試

- **Decision**: 重複次數範圍 3-20 次，預設 5 次
  - **Rationale**: 5 次可以提供合理的穩定性，同時不會過度增加計算時間
  - **Alternatives considered**: 
    - 3-10 次：範圍較小，可能不夠穩定
    - 5-50 次：範圍較大，但可能過度增加計算時間

- **Decision**: 顯示平均值和標準差
  - **Rationale**: 平均值提供中心趨勢，標準差提供變異性資訊
  - **Alternatives considered**: 
    - 僅顯示平均值：缺少變異性資訊
    - 顯示中位數和四分位距：更複雜，不符合簡單優先原則

## Implementation Details
- **評估流程**:
  1. 使用者選擇重複次數 N
  2. 重複 N 次：
     - 隨機分割資料集（使用不同的 random_state）
     - 訓練模型
     - 計算評估指標（R²、MSE、MAE）
  3. 計算所有結果的平均值和標準差
  4. 顯示結果

- **隨機種子管理**:
  - 每次重複使用不同的隨機種子（base_seed + iteration）
  - 確保每次重複的隨機性獨立
  - 可選：允許使用者設定基礎隨機種子

- **結果展示**:
  - 主要顯示：平均值 ± 標準差（例如：0.85 ± 0.03）
  - 可選顯示：每次評估的詳細結果表格
  - 使用表格或圖表展示結果

- **性能考量**:
  - 重複評估會增加訓練時間（N 倍）
  - 顯示進度指示器，讓使用者了解評估進度
  - 對於大型資料集，可能需要較長時間

## Risks / Trade-offs
- **Risk**: 重複評估會增加訓練時間
  - **Mitigation**: 提供進度指示器，限制重複次數上限（20 次），並在說明中提醒使用者

- **Risk**: 評估結果可能仍然受到資料分布的影響
  - **Mitigation**: 顯示標準差讓使用者了解變異性，並提供足夠的重複次數選項

- **Trade-off**: 評估穩定性 vs 計算時間
  - **Choice**: 提供靈活的選項，讓使用者根據需求選擇

## Open Questions
- 是否需要提供進度條顯示評估進度？
- 是否需要允許使用者設定隨機種子？
- 是否需要提供評估結果的視覺化（例如：箱線圖）？

